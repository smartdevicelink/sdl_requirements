## Functional requirements  

1.  
In case  
app with HMIType = PROJECTION (isMedia = true) is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (DEACTIVATE_HMI, isActive:true) from HMI  

SDL must  

send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore the HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (DEACTIVATE_HMI, isActive=false) from HMI)  

2.  
In case  
app with HMIType = PROJECTION (isMedia = false) is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (DEACTIVATE_HMI, isActive:true) from HMI  

SDL must 

send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore the HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (DEACTIVATE_HMI, isActive=false) from HMI)  

3.  
In case  
app with HMIType = PROJECTION (isMedia = true) is running in FULL or LIMITED HMILevel  
and SDL receives VR.Started from HMI  

SDL must 

send OnHMIStatus (`<current_HMILevel>`, NOT_AUDIBLE) to mobile app
restore the audioStreamingState of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives VR.Stopped from HMI)  

4.  
In case  
app with HMIType = PROJECTION (isMedia = true) is running in FULL or LIMITED HMILevel  
and SDL receives TTS.Started from HMI  
and system supports audio mixing (BC.MixingAudioSupported (attenuatedSupported="true") in response from HMI or 'MixingAudioSupported' = "true" at .ini file)  

SDL must

send OnHMIStatus (<current_HMILevel>, ATTENUATED) to mobile app  
restore the audioStreamingState of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives TTS.Stopped from HMI)  

5.  
In case  
app with HMIType = PROJECTION (isMedia = true) is running in FULL or LIMITED HMILevel  
and SDL receives TTS.Started from HMI  
and system does not support audio mixing (BC.MixingAudioSupported (attenuatedSupported="false") in response from HMI or 'MixingAudioSupported' = "false" at .ini file)  

SDL must  

send OnHMIStatus (`<current_HMILevel>`, NOT_AUDIBLE) to mobile app  
restore the audioStreamingState of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives TTS.Stopped from HMI)  

6.  
In case  
app with HMIType = PROJECTION (isMedia = true) is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (PHONE_CALL, isActive:true) from HMI  

SDL must  

send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore the HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (PHONE_CALL, isActive=false) from HMI)  

7.  
In case  
app with HMIType = PROJECTION (isMedia = false) is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (PHONE_CALL, isActive:true) from HMI  

SDL must  

send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore the HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (PHONE_CALL, isActive=false) from HMI)  

8.  
In case  
app with HMIType = PROJECTION (isMedia = true) is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (EMERGENCY_EVENT, isActive:true) from HMI  

SDL must  

send OnHMIStatus (`<current_HMILevel>`, NOT_AUDIBLE) to mobile app  
restore the audioStreamingState of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (EMERGENCY_EVENT, isActive=false) from HMI)  

9.  
In case  
app with HMIType = PROJECTION (isMedia = true) with `<appID>` is running in FULL HMILevel  
and the SDL receives OnAppDeactivated (`<appID>`) from HMI  

SDL must 

send OnHMIStatus (LIMITED, `<current_audioStreamingState>`) to mobile app  

10. 
In case  
app with HMIType = PROJECTION (isMedia = true) with `<appID>` is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (AUDIO_SOURCE, isActive=true) from HMI  

SDL must 

send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (AUDIO_SOURCE, isActive=false) from HMI)  

11.  
In case  
app with HMIType = PROJECTION (isMedia = false) with `<appID>` is running in FULL HMILevel  
and the SDL receives OnEventChanged (AUDIO_SOURCE, isActive=true) from HMI  

SDL must

send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (AUDIO_SOURCE, isActive=false) from HMI)  

12. 
In case  
app with HMIType = PROJECTION (isMedia = true) with `<appID>` is running in FULL or LIMITED HMILevel  
and SDL receives OnEventChanged (EMBEDDED_NAVI, isActive=true) from HMI  

SDL must 

send OnHMIStatus (LIMITED, `<current_audioStreamingState>`) to mobile app  
restore HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (EMBEDDED_NAVI, isActive=false) from HMI)  

13.  
In case  
app with HMIType = PROJECTION (isMedia = false) with `<appID>` is running in FULL HMILevel  
and SDL receives OnEventChanged (EMBEDDED_NAVI, isActive=true) from HMI  

SDL must 
 
send OnHMIStatus (BACKGROUND, NOT_AUDIBLE) to mobile app  
restore HMILevel of app being in effect before event by sending OnHMIStatus to app (meaning: after SDL receives OnEventChanged (EMBEDDED_NAVI, isActive=false) from HMI)

## Diagram

Mobile projection HMILevels during events

![Mobile projection HMILevels during events](https://github.com/smartdevicelink/sdl_requirements/blob/master/detailed_docs/accessories/HMILevels_during_events.png)

