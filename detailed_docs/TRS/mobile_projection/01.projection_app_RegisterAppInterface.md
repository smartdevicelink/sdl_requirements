## Functional requirements

1.  
In case  
device successfully connects over USB transport

and mobile app from this device sends RegisterAppInterface_request with:
- "appHMIType" = PROJECTION
- "isMedia" = false
- other valid params
and HMIType = PROJECTION is allowed by Policies  

SDL must  

register this mobile app as PROJECTION (isMedia = false) in the system  
respond SUCCESS (success:true) resultCode with adding `<displayMode>` param to mobile app in case of NO other failures  
send OnAppRegistered notification to HMI  

2.     
In case  
PROJECTION mobile app sends RegisterAppInterface request to SDL  
and this request is valid  

SDL must

respond SUCCESS (success:true) resultCode with adding `<displayMode>` param to mobile app in case of NO other failures  
send OnAppRegistered notification to HMI  

3.  
In case device successfully connects over USB transport  
and mobile app from this device sends RegisterAppInterface_request with:  
- "appHMIType" = PROJECTION   
- other valid params  
and PROJECTION appHMIType is NOT allowed by Policies  

SDL must

respond DISALLOWED (success:false) resultCode to mobile app  

4.   
In case device successfully connects over BT  
and PROJECTION mobile app with `<appID>` from this device successfully registers  
and SDL receives OnExitApplication (`<appID>`, reason = UNAUTHORIZED_TRANSPORT_REGISTRATION) from HMI  

SDL must  

unregister application with `<appID>` via OnAppInterfaceUnregistered (APP_UNAUTHORIZED) notification  
clean all internal information about app's with `<appID>` non-responded RPCs  
ignore all responses and notifications from HMI associated with `<appID>` if received from HMI    

## Non-functional requirements   

a. New appHMIType "PROJECTION" must be added to HMI_API  
b. New appHMIType "PROJECTION" must be added to MOBILE_API  
c. Policies Manager must support new "PROJECTION" appHMIType

### Additions to Mobile_API  

```
<enum name="AppHMIType">
		<description>Enumeration listing possible app types.</description>
		<element name="DEFAULT" />
		<element name="COMMUNICATION" />
		<element name="MEDIA" />
		<element name="MESSAGING" />
		<element name="NAVIGATION" />
		<element name="INFORMATION" />
		<element name="SOCIAL" />
		<element name="PROJECTION" />
		<element name="BACKGROUND_PROCESS" />
		<element name="TESTING" />
		<element name="SYSTEM" />
	</enum>
```

### Additions to HMI_API
```
<enum name="AppHMIType">
		<description>Enumeration listing possible app types.</description>
		<element name="DEFAULT" />
		<element name="COMMUNICATION" />
		<element name="MEDIA" />
		<element name="MESSAGING" />
		<element name="NAVIGATION" />
		<element name="INFORMATION" />
		<element name="SOCIAL" />
		<element name="PROJECTION" />
		<element name="BACKGROUND_PROCESS" />
		<element name="TESTING" />
		<element name="SYSTEM" />
	</enum>
```

## Diagram

RegisterAppInterface

![RegisterAppInterface](https://github.com/smartdevicelink/sdl_requirements/blob/master/detailed_docs/accessories/projection_app_registration.png)



